<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>æƒ…å¢ƒéŒ„éŸ³æ’­æ”¾å™¨ï¼ˆç´”éœæ…‹å­—å¹•ç‰ˆï¼Œé¡¯ç¤ºèªªè©±è€…ï¼‰</title>
    <style>
        /* CSS æ¨£å¼é–‹å§‹ */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f4f9;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 900px;
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 25px;
        }

        .scenario-buttons {
            margin-bottom: 25px;
            /* 3x3 ç¶²æ ¼ä½ˆå±€ */
            display: grid;
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; 
            justify-content: center;
        }

        .scenario-buttons button {
            padding: 15px 25px; /* åŠ å¤§æŒ‰éˆ•å°ºå¯¸ */
            margin: 0;
            border: none;
            border-radius: 8px;
            background-color: #3498db;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s, transform 0.1s;
        }

        .scenario-buttons button:hover {
            background-color: #2980b9;
        }

        #audioPlayer {
            width: 100%;
            margin-bottom: 30px; 
            border-radius: 4px;
        }

        /* å®Œæ•´éœæ…‹å­—å¹•åˆ—è¡¨å€å¡Š */
        #staticTranscriptContainer {
            text-align: left;
            padding: 15px;
            background: #fcfcfc;
            border: 1px solid #ddd;
            border-radius: 8px;
            max-height: 400px; 
            overflow-y: auto; 
        }
        
        #staticTranscriptContainer h2 {
            font-size: 1.5em;
            color: #3498db;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
        }
        
        #staticTranscriptList li {
            list-style: none;
            padding: 8px 0;
            font-size: 1.2em;
            border-bottom: 1px dotted #eee;
            display: flex; /* ä½¿ç”¨ flex æ’ç‰ˆï¼Œè®“èªªè©±è€…å’Œå…§å®¹å°é½Š */
        }

        /* èªªè©±è€…åç¨±æ¬„ä½æ¨£å¼ */
        #staticTranscriptList .speaker-label {
            min-width: 120px; /* å›ºå®šèªªè©±è€…æ¬„ä½å¯¬åº¦ */
            font-weight: bold;
            margin-right: 15px;
            /* ç¢ºä¿å°é½Š */
            text-align: right; 
        }
        
        /* å›è¦†å…§å®¹æ¨£å¼ */
        #staticTranscriptList .reply-content {
            color: #e74c3c; 
            font-weight: bold;
            background: #fdeaea;
            padding: 2px 5px; 
            border-radius: 3px;
        }
        
        /* å…ƒæ•¸æ“šï¼ˆå¦‚éŸ¿éˆ´ï¼‰æ¨£å¼ */
        #staticTranscriptList .meta-content {
             color: #95a5a6;
             font-style: italic;
             /* è®“å…ƒæ•¸æ“šå…§å®¹å’Œèªªè©±è€…æ¨™ç±¤ä¸€èµ·ä½”ç”¨ç©ºé–“ */
             flex-grow: 1; 
        }
        
        /* éš±è—ä¸å†éœ€è¦çš„å‹•æ…‹å€å¡Š */
        #subtitleDisplay, #calibrationHint {
            display: none; 
        }
        
        /* CSS æ¨£å¼çµæŸ */
    </style>
</head>
<body>

    <div class="container">
        <h1>æƒ…å¢ƒéŒ„éŸ³æ’­æ”¾å™¨</h1>

        <div class="scenario-buttons">
            <button onclick="loadScenario('friendm')">æƒ…å¢ƒä¸€ï¼šæœ‹å‹ç”·</button>
            <button onclick="loadScenario('friendg')">æƒ…å¢ƒäºŒï¼šæœ‹å‹å¥³</button>
            <button onclick="loadScenario('safem')">æƒ…å¢ƒä¸‰ï¼šå®‰å…¨æ­è»Šç”·</button>
            <button onclick="loadScenario('safeg')">æƒ…å¢ƒå››ï¼šå®‰å…¨æ­è»Šå¥³</button>
            <button onclick="loadScenario('bf')">æƒ…å¢ƒäº”ï¼šç”·æœ‹å‹</button>
            <button onclick="loadScenario('gf')">æƒ…å¢ƒå…­ï¼šå¥³æœ‹å‹</button>
            <button onclick="loadScenario('dad')">æƒ…å¢ƒä¸ƒï¼šçˆ¸çˆ¸</button>
            <button onclick="loadScenario('mom')">æƒ…å¢ƒå…«ï¼šåª½åª½</button>
            <button onclick="loadScenario('dad1')">æƒ…å¢ƒä¹ï¼šå°èªçˆ¸</button>
        </div>

        <audio id="audioPlayer" controls></audio>
        
        <div id="staticTranscriptContainer">
            <h2 id="transcriptTitle">è«‹é¸æ“‡ä¸€å€‹æƒ…å¢ƒä¾†é¡¯ç¤ºå®Œæ•´å°è©±</h2>
            <ul id="staticTranscriptList">
                </ul>
        </div>
    </div>
    
    <script>
        const SPEAKER_PARTNER = "å°å¤¥ä¼´"; 
        const SPEAKER_USER = "ä½ ";      
        const RING_DURATION = 3.5; 
        
        // 1. æ•¸æ“šçµæ§‹ (å…§å®¹ä¸è®Š)
        const SCENARIOS = {
            // ------------------ æœ‹å‹æ¨¡å¼ ------------------
            'friendm': {
                title: 'æœ‹å‹ç”·',
                audioSrc: 'æœ‹å‹ç”·.m4a',
                subtitles: [
                    { start: 0.00, end: 3.50, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: 3.50, end: 5.00, text: "å–‚ï¼Œä½ åœ¨å“ªè£¡ï¼Ÿ", speaker: SPEAKER_PARTNER }, 
                    { start: 5.00, end: 6.50, text: "ï¼ˆåœ¨è·¯ä¸Šäº†ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.50, end: 7.50, text: "å•Šé‚„è¦å¹¾åˆ†é˜ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 7.50, end: 9.00, text: "ï¼ˆï¼Ÿåˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.00, end: 11.50, text: "å“¦å¥½å•¦é‚£ä½ åˆ°äº†èªªä¸€ä¸‹æˆ‘å»æ¥ä½ ", speaker: SPEAKER_PARTNER },
                    { start: 11.50, end: 13.00, text: "ï¼ˆå“¦å¥½å•¦æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },
            'friendg': {
                title: 'æœ‹å‹å¥³',
                audioSrc: 'æœ‹å‹å¥³.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.2, text: "å–‚ï¼Œä½ åœ¨å“ªè£¡ï¼Ÿ", speaker: SPEAKER_PARTNER }, 
                    { start: 5.2, end: 6.7, text: "ï¼ˆåœ¨è·¯ä¸Šäº†ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.7, end: 7.8, text: "å•Šé‚„è¦å¹¾åˆ†é˜ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 7.8, end: 9.3, text: "ï¼ˆï¼Ÿåˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.3, end: 11.8, text: "å“¦å¥½å•¦ï¼Œé‚£ä½ åˆ°æˆ‘èªªä¸€ä¸‹æˆ‘å»æ¥ä½ ", speaker: SPEAKER_PARTNER },
                    { start: 11.8, end: 13.3, text: "ï¼ˆå“¦å¥½å•¦æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },

            // ------------------ å®‰å…¨æ­è»Šæ¨¡å¼ ------------------
            'safem': {
                title: 'å®‰å…¨æ­è»Šç”·',
                audioSrc: 'å®‰å…¨æ­è»Šç”·.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.4, text: "å–‚ï¼Œä½ ä¸Šè»Šäº†æ²’", speaker: SPEAKER_PARTNER },
                    { start: 5.4, end: 6.9, text: "ï¼ˆä¸Šè»Šäº†ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.9, end: 7.9, text: "é˜¿ä½ è»Šç‰Œå¤šå°‘", speaker: SPEAKER_PARTNER },
                    { start: 7.9, end: 9.4, text: "ï¼ˆxxxxxxxï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.4, end: 11.4, text: "å“¦å¥½å•¦æ³¨æ„å®‰å…¨å–”ç­‰ç­‰è¦‹", speaker: SPEAKER_PARTNER },
                    { start: 11.4, end: 12.9, text: "ï¼ˆå¥½æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },
            'safeg': {
                title: 'å®‰å…¨æ­è»Šå¥³',
                audioSrc: 'å®‰å…¨æ­è»Šå¥³.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.2, text: "å–‚ï¼Œä½ ä¸Šè»Šäº†æ²’", speaker: SPEAKER_PARTNER },
                    { start: 5.2, end: 6.7, text: "ï¼ˆä¸Šè»Šäº†ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.7, end: 7.7, text: "å•Šä½ è»Šç‰Œå¤šå°‘", speaker: SPEAKER_PARTNER },
                    { start: 7.7, end: 9.2, text: "ï¼ˆxxxxxxxï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.2, end: 11.0, text: "å–”å¥½å•¦æ³¨æ„å®‰å…¨å–”ç­‰ç­‰è¦‹", speaker: SPEAKER_PARTNER },
                    { start: 11.0, end: 12.5, text: "ï¼ˆå¥½æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },

            // ------------------ æƒ…ä¾¶æ¨¡å¼ ------------------
            'bf': {
                title: 'ç”·æœ‹å‹',
                audioSrc: 'ç”·å‹.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.4, text: "å–‚ï¼Œå¯¶å¯¶ä½ åˆ°å“ªäº†ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 5.4, end: 6.9, text: "ï¼ˆåœ¨è·¯ä¸Šäº†ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.9, end: 10.5, text: "ã„›å¥½å‘€å¥½å‘€é‚£æˆ‘ç­‰ç­‰è²·å®µå¤œå»çµ¦ä½ åƒå“¦", speaker: SPEAKER_PARTNER },
                    { start: 10.5, end: 12.0, text: "ï¼ˆå¥½å•Šä½ çœŸå¥½ğŸ’—ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 12.0, end: 12.8, text: "é˜¿ä½ å¤§æ¦‚å¤šä¹…åˆ°ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 12.8, end: 14.3, text: "ï¼ˆå¹¾åˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 14.3, end: 15.6, text: "å¥½å•Šç­‰ä½ éä¾†å–”ï½", speaker: SPEAKER_PARTNER },
                    { start: 15.6, end: 17.1, text: "ï¼ˆå¥½çš„æ°æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },
            'gf': {
                title: 'å¥³æœ‹å‹',
                audioSrc: 'å¥³å‹.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.5, text: "å–‚ï¼Œå¯¶å¯¶ä½ åˆ°å“ªäº†ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 5.5, end: 7.0, text: "ï¼ˆåœ¨è·¯ä¸Šäº†ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 7.0, end: 9.5, text: "ã„›å¥½å‘€å¥½å‘€é‚£æˆ‘ç­‰ç­‰è²·å®µå¤œå»çµ¦ä½ åƒå“¦", speaker: SPEAKER_PARTNER },
                    { start: 9.5, end: 11.0, text: "ï¼ˆå¥½å•Šä½ çœŸå¥½ğŸ’—ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 11.0, end: 12.0, text: "é˜¿ä½ å¤§æ¦‚å¤šä¹…åˆ°ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 12.0, end: 13.5, text: "ï¼ˆå¹¾åˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 13.5, end: 15.0, text: "å¥½å•Šç­‰ä½ éä¾†å–”ï½", speaker: SPEAKER_PARTNER },
                    { start: 15.0, end: 16.5, text: "ï¼ˆå¥½çš„æ°æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },

            // ------------------ å®¶äººæ¨¡å¼ ------------------
            'dad': {
                title: 'çˆ¸çˆ¸',
                audioSrc: 'çˆ¸çˆ¸.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.0, text: "å–‚ï¼Œå•Šä½ è¦å›ä¾†äº†æ²’ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 5.0, end: 6.5, text: "ï¼ˆå¥½å•¦å¥½å•¦å¿«åˆ°äº†å•¦ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.5, end: 7.5, text: "å•Šé‚„è¦å¤šä¹…ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 7.5, end: 9.0, text: "ï¼ˆå¤§æ¦‚å†ï¼Ÿåˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.0, end: 10.8, text: "å¥½å•¦é‚£æˆ‘æŠŠèœç†±ä¸€ç†±ç­‰ä½ å›ä¾†", speaker: SPEAKER_PARTNER },
                    { start: 10.8, end: 12.3, text: "ï¼ˆå¥½æˆ‘çŸ¥é“äº†æ°æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },
            'mom': {
                title: 'åª½åª½',
                audioSrc: 'åª½åª½.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.0, text: "å–‚ï¼Œå•Šä½ å›ä¾†äº†æ²’ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 5.0, end: 6.5, text: "ï¼ˆå¥½å•¦å¥½å•¦å¿«åˆ°äº†å•¦ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 6.5, end: 7.5, text: "å•Šé‚„è¦å¤šä¹…ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 7.5, end: 9.0, text: "ï¼ˆå¤§æ¦‚å†ï¼Ÿåˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.0, end: 11.5, text: "å¥½å•¦ï¼Œé‚£æˆ‘æŠŠèœç†±ç†±ç­‰ä½ å›ä¾†å–”", speaker: SPEAKER_PARTNER },
                    { start: 11.5, end: 13.0, text: "ï¼ˆå¥½æˆ‘çŸ¥é“äº†æ°æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            },
            'dad1': {
                title: 'å°èªçˆ¸',
                audioSrc: 'å°èªçˆ¸.m4a',
                subtitles: [
                    { start: 0.0, end: RING_DURATION, text: "ï¼ˆé›»è©±éŸ¿éˆ´è²...ï¼‰", type: 'meta' },
                    { start: RING_DURATION, end: 5.5, text: "å–‚ï¼Œä½ å·²ç¶“åˆ°åï¼ˆtsÃ¹ï¼‰çŸ£ç„¡ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 5.5, end: 7.0, text: "ï¼ˆå¥½å•¦å¥½å•¦å¿«åˆ°äº†å•¦ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 7.0, end: 8.0, text: "å•Šæºï¼ˆkohï¼‰å“‡å’•ï¼Ÿ", speaker: SPEAKER_PARTNER },
                    { start: 8.0, end: 9.5, text: "ï¼ˆå¤§æ¦‚å†ï¼Ÿåˆ†é˜ï¼‰", type: 'reply', speaker: SPEAKER_USER }, 
                    { start: 9.5, end: 11.5, text: "å¥½å•¦ï¼Œå“‡ä¸Ÿï¼ˆtoÌhï¼‰çµ¦ä½ æŒ‰ ç­‰ï¼ˆÃ¡n-tÃ¡nï¼‰è¡è¡å–”", speaker: SPEAKER_PARTNER },
                    { start: 11.5, end: 13.0, text: "ï¼ˆå¥½æˆ‘çŸ¥é“äº†æ°æ°ï¼‰", type: 'reply', speaker: SPEAKER_USER, isEnd: true } 
                ]
            }
        };

        const audioPlayer = document.getElementById('audioPlayer');
        const staticTranscriptList = document.getElementById('staticTranscriptList');
        const transcriptTitle = document.getElementById('transcriptTitle');

        /**
         * è¼‰å…¥é¸å®šçš„æƒ…å¢ƒéŸ³æª”å’Œå­—å¹•è³‡æ–™ï¼Œä¸¦é¡¯ç¤ºå®Œæ•´å°è©±
         */
        function loadScenario(scenarioKey) {
            const scenario = SCENARIOS[scenarioKey];
            if (!scenario) {
                transcriptTitle.textContent = "éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°è©²æƒ…å¢ƒæ•¸æ“šã€‚";
                return;
            }

            // 1. åœæ­¢ä¸¦è¼‰å…¥æ–°çš„éŸ³è¨Šä¾†æº
            audioPlayer.pause();
            audioPlayer.src = scenario.audioSrc;
            audioPlayer.load(); 

            // 2. æ›´æ–°æ¨™é¡Œ
            transcriptTitle.textContent = `å®Œæ•´å°è©±å…§å®¹ï¼š${scenario.title}`;
            
            // 3. é¡¯ç¤ºå®Œæ•´éœæ…‹å­—å¹•åˆ—è¡¨
            displayFullTranscript(scenario.subtitles);
        }
        
        /**
         * æ¸²æŸ“å®Œæ•´å°è©±å…§å®¹åˆ°ä¸‹æ–¹åˆ—è¡¨
         */
        function displayFullTranscript(subtitles) {
            staticTranscriptList.innerHTML = ''; // æ¸…ç©ºèˆŠå…§å®¹
            subtitles.forEach((sub) => {
                const li = document.createElement('li');
                
                let speakerLabel = sub.speaker || ''; // ç²å–èªªè©±è€…æ¨™ç±¤
                let displayText = sub.text;
                let contentClass = '';
                
                // æª¢æŸ¥æ˜¯å¦ç‚ºå›è¦†æ®µè½ï¼Œä¸¦çµ¦äºˆæ¨£å¼
                if (sub.type === 'reply') {
                    contentClass = 'reply-content';
                } else if (sub.type === 'meta') {
                    contentClass = 'meta-content';
                }
                
                // æ§‹å»ºèªªè©±è€…æ¨™ç±¤ã€‚å¦‚æœæ˜¯å…ƒæ•¸æ“šï¼Œå‰‡speakerLabelç‚ºç©ºã€‚
                // å¦‚æœ speakerLabel ç‚ºç©ºï¼Œå‰‡åªé¡¯ç¤ºä¸€å€‹ min-width çš„ç©º spanã€‚
                const speakerHtml = `<span class="speaker-label">${speakerLabel}${speakerLabel ? 'ï¼š' : ''}</span>`;

                li.innerHTML = `
                    ${speakerHtml}
                    <span class="${contentClass}">${displayText}</span>
                `;
                staticTranscriptList.appendChild(li);
            });
        }
        
        // é é¢è¼‰å…¥æ™‚ï¼Œé è¨­è¼‰å…¥ç¬¬ä¸€å€‹æƒ…å¢ƒ
        window.onload = function() {
            loadScenario('friendm'); 
        };
    </script>

</body>
</html>